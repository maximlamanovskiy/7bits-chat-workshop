# 7bits workshop server

Written in Go, simple websocket server

## Dependencies

* Go 1.22.1
* Echo
* Gorilla/Websocket

## How to run

First of all you need to install dependencies via:
```shell
go get .
```

Then you can run the project
```shell
go run .
```

## Задание со звездочкой

Добавить в проект простую регистрацию/авторизацию. Сильно сложно делать не надо (но если хотите, то можете :P). Но хватит простой структуры данных в памяти, которая запомнит какому имени пользователя какой токен соответствует и будет легко по токену находить имя.

Надо будет добавить новый эндпоинт, например `/login`, который будет принимать `POST`-запросы с телом:
```json
{
    "name": "Maxim"
}
```
И возвращать токен, который человек на клиентской части приложения будет где-нибудь сохранять, например в localStorage (!!!Так лучше не делать, так как это хранилище не безопасно) или устанавливать [Cookie](https://echo.labstack.com/docs/cookies) c нашим токеном и флагом httpOnly (!!!Это очень важно, так как в этом случае никто не сможет подменить нашу Cookie).

Затем надо будет переделать запрос на установление Websocket-соединения с сервером. Убрать имя и вместо него принимать этот самый уникальный токен (или получать его из Cookie во время установления соединения). Сервер по этому токену должен узнать имя пользователя и разослать на всех сообщение с правильным именем. Рекомендую для самого простого случая взять [Maps](https://go.dev/tour/moretypes/19). А если хотите посложнее и круче, то смотрите в сторону баз данных, например самое простое - [SQLite](https://pkg.go.dev/github.com/mattn/go-sqlite3), тогда когда вы перезапустите сервер токен будут жить и дальше.

Также, понадобится проверка, если пользователь написал какой-то мусор в токен или по такому токена нет пользователя, то возвращать 401.